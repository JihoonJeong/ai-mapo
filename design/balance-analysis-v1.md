# 밸런스 분석: "균등 배분 고착" 문제

> **Author**: Luca  
> **Date**: 2026-02-20  
> **기반**: GPT-4o-mini 1회 실험 + 시뮬레이션 엔진 코드 분석

---

## 증상

GPT-4o-mini 48턴 플레이 결과:
- **만족도 82점 (15/15 만점)**
- **재정자립도 +5%p (10/10 만점)**
- **균형발전 σ=3.2 (10/10 만점)**
- 경제 -10.8% (0/10), 인구 -3.6% (0/15), 세수 -5.9% (0/10)
- T8부터 48까지 **40턴 동일한 예산 배분** (15/15/10/15/15/15/15)
- 정책 활성화 **총 6회**

**핵심 문제: 균등하게 뿌리는 것만으로 만족도와 재정이 만점인데, 경제와 인구는 알아서 하락한다.**

AI 입장에서 이건 합리적 전략이다. "바꿀 이유가 없는" 배분을 찾았기 때문.

---

## 근본 원인 분석

### 원인 1: 감쇠 대비 예산 효과가 너무 크다

만족도 수식 추적 (균등 배분 시):

```
감쇠: -0.3/턴 (모든 구성요소)

예산 효과: budgetEffect = 0.5 × (투자/적정 비율)
- 균등 배분 시 모든 카테고리가 적정 비율 근처
- → 효과 ≈ 0.5/턴

예산이 만족도에 기여하는 경로 (BUDGET_TO_SATISFACTION):
  economy 만족도:    경제(0.8) + 문화(0.2) + 재생(0.2) = 합산 ~0.60
  housing 만족도:    교통(0.1) + 환경(0.4) + 교육(0.3) + 복지(0.2) + 재생(0.5) = 합산 ~0.75
  transport 만족도:  교통(0.9) + 경제(0.1) = 합산 ~0.50
  safety 만족도:     환경(0.5) + 재생(0.1) = 합산 ~0.30
  culture 만족도:    경제(0.1) + 문화(0.7) + 환경(0.1) + 교육(0.3) = 합산 ~0.60
  welfare 만족도:    교육(0.4) + 복지(0.7) = 합산 ~0.55
```

**모든 만족도 구성요소의 순 변동이 양수**: 감쇠(-0.3)보다 예산 효과 합산(0.30~0.75)이 크다.

48턴 × (+0.2 최소) = **최소 +9.6포인트** 상승. 초기 60에서 시작하면 70+는 자동.

게다가 housing은 +0.45/턴이라 48턴이면 +21.6. 초기 60 → 81.6 — 80 넘으면 우수.

### 원인 2: OPTIMAL_PCT가 너무 균등하다

```
현재 OPTIMAL_PCT:
  economy:15, transport:15, culture:10, environment:10, 
  education:15, welfare:20, renewal:15
  → 범위: 10~20 (편차 작음)
```

균등 배분(~14.3%)이 모든 카테고리의 적정 비율에 근접. 체감감소(diminishing returns)가 적정 이상에서만 작동하기 때문에, 균등 배분은 **모든 카테고리에서 효율 100%**에 가깝다.

이건 비현실적이다. 실제 지방정부는 복지에 30%+, 경제에 5~10% 쓰고, 문화에는 2~3%. 균등하게 나누는 게 불가능하도록 설계되어야 한다.

### 원인 3: 경제 성장이 정책에만 의존

```
사업체 순변동 = (신규 2.2% - 폐업 1.6%) × 가속 = +0.6%/분기
- 하지만 이건 "아무것도 안 해도" 얻는 기본 성장
- 경제 예산 15%는 policyBonus = 1.0 (보너스 없음, 기준점)
- 정책 없으면 newBizBonus = 0
```

세수 수식:
```
taxGrowth = (bizGrowth × 0.3 + TAX_DECLINE_RATE) × ACCEL_FINANCE
- bizGrowth가 양수여도, 0.3을 곱해서 작아짐
- TAX_DECLINE_RATE = -0.005
- 사업체가 5% 이상 성장해야 세수가 양수로 전환
  (0.05 × 0.3 = 0.015 > 0.005)
```

GPT-4o-mini에서 사업체가 -10.8%인 이유: 정책을 거의 안 썼기 때문. 하지만 정책을 쓰지 않아도 만족도는 82. **정책을 쓸 인센티브가 없다**.

### 원인 4: 만족도와 경제의 디커플링

높은 만족도가 경제 성장에 기여하는 경로가 약하다:
- 만족도 → 인구 유입 → 사업체 수요 (간접, 느림)
- 직접적 채널 없음 (만족도 85인데 사업체 -10%가 가능)

반대로, 경제 하락이 만족도에 미치는 영향도 약하다:
- 사업체 밀도 평균 대비 비교 → 모든 동이 함께 하락하면 영향 0
- "모두 같이 가난해지면 아무도 불만이 없다" 문제

---

## 제안: 밸런스 패치

### 패치 A: 감쇠 강화 (가장 단순)

```javascript
// 현재
const DECAY = -0.3;

// 제안
const DECAY = -0.8;
```

효과:
- 균등 배분의 순효과가 0 근처로 떨어짐
- 만족도를 올리려면 특정 카테고리에 집중 투자 필요
- 하지만 집중하면 다른 카테고리가 하락 → **트레이드오프 생성**

위험: 너무 높으면 "아무것도 안 먹히는" 느낌. -0.6~-0.8 범위에서 테스트.

### 패치 B: OPTIMAL_PCT 격차 확대

```javascript
// 현재: 10~20 범위
const OPTIMAL_PCT = {
  economy: 15, transport: 15, culture: 10,
  environment: 10, education: 15, welfare: 20, renewal: 15,
};

// 제안: 5~30 범위 (실제 지자체 예산 구조 반영)
const OPTIMAL_PCT = {
  economy: 10, transport: 15, culture: 5,
  environment: 8, education: 12, welfare: 30, renewal: 20,
};
```

효과:
- 균등 배분(14.3%)이 복지(적정 30%)에 크게 부족 → 복지 만족도 하락
- 문화(적정 5%)에 과다투자 → 체감감소 작동
- **적정에 맞추면 편중 예산이 되고, 균등이면 효율 손실** → 진정한 선택

### 패치 C: 인구/경제 하락의 만족도 페널티

현재 경제 하락이 만족도에 미치는 영향이 "상대적"이라 모두 함께 하락하면 감지 불가. "절대적 기준" 추가:

```javascript
// economy.js 관련 만족도 반영 (satisfaction.js에 추가)
// 초기값 대비 사업체 감소 → 경제 만족도 페널티
if (dong._initBiz) {
  const bizDecline = (dong._initBiz - dong.businesses) / dong._initBiz;
  if (bizDecline > 0.05) { // 5% 이상 감소 시
    factors.economy -= bizDecline * 15; // 10% 감소 → -1.5
  }
}

// 인구 감소 → 복지/주거 만족도 페널티 (서비스 수요는 줄지만 시설 낭비)
if (dong._initPop) {
  const popDecline = (dong._initPop - dong.population) / dong._initPop;
  if (popDecline > 0.03) { // 3% 이상 감소 시
    factors.welfare -= popDecline * 10;
    factors.housing -= popDecline * 5;
  }
}
```

효과: 경제/인구가 하락하면 만족도가 자동으로 떨어짐. "안전한 정체"가 불가능해짐.

### 패치 D: 예산 효과의 인구 스케일링

현재: 인구가 줄어도 예산 효과 동일. 인구 30만이나 35만이나 같은 예산으로 같은 만족도.

```javascript
// satisfaction.js에 추가
// 인구가 많을수록 같은 예산으로 더 많은 사람을 만족시켜야 함
const totalPop = state.dongs.reduce((s, d) => s + d.population, 0);
const popScale = totalPop / BASE_POP; // 인구 증가 → >1.0
const budgetPerCapita = freeBudget / popScale;
// budgetEffects 계산 시 freeBudget 대신 budgetPerCapita 사용
```

효과: 인구가 늘면 더 많은 예산 필요 → 인구 성장의 비용이 생김.

---

## 추천: 패치 조합

**즉시 적용 (Phase 1 + MCP App 양쪽):**

1. **패치 A**: DECAY -0.3 → **-0.6** (보수적 시작)
2. **패치 C**: 초기값 대비 경제/인구 하락 페널티

**효과 확인 후:**

3. **패치 B**: OPTIMAL_PCT 격차 확대 (이건 밸런스 영향이 커서 충분히 테스트 후)
4. **패치 D**: 인구 스케일링 (복잡도 증가, Phase 2에서)

### 예상 결과

패치 A+C 적용 시 균등 배분 전략:
- 감쇠 -0.6 vs 예산 효과 합산 ~0.5 → 순효과 ≈ -0.1 (미세 하락)
- 경제/인구 하락 시 추가 페널티 → 만족도 70대 (82→70 예상)
- 만족도를 올리려면 **특정 카테고리에 집중** → 다른 쪽 하락 → 트레이드오프
- 경제를 키우려면 **경제 예산 집중 + 정책 활성화** 필요 → 다른 만족도 하락 → 진정한 선택

**AI에게 의미있는 조언 공간이 생긴다**: "만족도가 하락하고 있습니다. 복지에 집중하시겠습니까, 아니면 경제 성장을 우선하시겠습니까?"

---

## 구현 핸드오프

Cody에게:

1. `js/engine/satisfaction.js`: DECAY를 -0.6으로 변경
2. `js/engine/satisfaction.js`: updateSatisfaction 함수에 "초기값 대비 하락 페널티" 추가 (패치 C 코드)
3. ai-mapo-mcp/engine에도 동일 적용
4. headless로 GPT-4o-mini 재실행 → 만족도 변화 확인

**성공 기준**: 균등 배분 전략이 만족도 65~75 (현재 82에서 하락), 경제/인구 성장에 적극 투자해야 A~B등급 가능.
